const{setPrototypeOf:t}=Object;const e="attributeChangedCallback",r="connectedCallback",o="disconnectedCallback";var n=(t,{MutationObserver:n,Element:a})=>{const s=new WeakSet,c=(t,e,n,a,l)=>{for(const u of t)(l||"querySelectorAll"in u)&&(a?e.has(u)||(e.add(u),n.delete(u),s.has(u)&&u[r]?.()):n.has(u)||(n.add(u),e.delete(u),s.has(u)&&u[o]?.()),l||c(u.querySelectorAll("*"),e,n,a,!0))},l=t=>{const e=new Set,r=new Set;for(const{addedNodes:o,removedNodes:n}of t)c(n,e,r,!1,!1),c(o,e,r,!0,!1)},u=n||globalThis.MutationObserver,d=new u(l),i=new u((t=>{for(const{target:r,attributeName:o,oldValue:n}of t)r[e](o,n,r.getAttribute(o))})),b=t=>{d.observe(t,{subtree:!0,childList:!0})};b(t);const w=a||globalThis.Element;if(w){const t=w.prototype.attachShadow;w.prototype.attachShadow=function(e){const r=t.call(this,e);return b(r),r}}return t=>{const{[e]:n,[r]:a,[o]:c}=t;if(n&&i.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:t.constructor.observedAttributes.map((e=>{const r=t.getAttribute(e);return null!=r&&n.call(t,e,null,r),e}))}),a||c){const e=d.takeRecords();e.length&&l(e),s.add(t),t.isConnected&&a?.call(t)}return t}};let a={HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg"};var s=(e=a)=>{const r=e.document||document,o=n(r,e);return new Proxy(new Map,{get(n,s){let c=n.get(s);if(!c){const l=new Map,u=r.createElementNS.bind(r,e[s]||a[s]),d=(r,n)=>{let c=l.get(n);c||l.set(n,c=u(n).constructor);class d extends((e=>{function r(e){return t(e,new.target.prototype)}return r.prototype=e.prototype,r})(c)){static tag=n;constructor(t){const r=e[s]||a[s];if(t&&t.namespaceURI!==r){const{attributes:e,childNodes:r}=t;t=u(n);for(const{name:r,value:o}of e)t.setAttribute(r,o);t.replaceChildren(...r)}return o(super(t||u(n)))}}return r.set(n,d),d};n.set(s,c=new Proxy(new Map,{get(t,e){const r=e.toLowerCase();return t.get(r)||d(t,r)}}))}return c}})};export{s as default};
